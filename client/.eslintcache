[{"/mnt/d/projects/Main Projects/social-media/app/client/src/index.tsx":"1","/mnt/d/projects/Main Projects/social-media/app/client/src/App.tsx":"2","/mnt/d/projects/Main Projects/social-media/app/client/src/utils/ApolloClient.ts":"3","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Navbar.tsx":"4","/mnt/d/projects/Main Projects/social-media/app/client/src/utils/cookies.ts":"5","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Links.tsx":"6","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Home.tsx":"7","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Register.tsx":"8","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Login.tsx":"9","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/RegisterForm.tsx":"10","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/LoginForm.tsx":"11","/mnt/d/projects/Main Projects/social-media/app/client/src/hooks/useForm.ts":"12","/mnt/d/projects/Main Projects/social-media/app/client/src/components/CustomInput.tsx":"13","/mnt/d/projects/Main Projects/social-media/app/client/src/components/AuthRoute.tsx":"14","/mnt/d/projects/Main Projects/social-media/app/client/src/AuthUser.context.tsx":"15","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/PostForm.tsx":"16","/mnt/d/projects/Main Projects/social-media/app/client/src/utils/graphql.ts":"17","/mnt/d/projects/Main Projects/social-media/app/client/src/components/PostCard.tsx":"18","/mnt/d/projects/Main Projects/social-media/app/client/src/components/LikeButton.tsx":"19","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/SingleUser.tsx":"20","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/SinglePost.tsx":"21","/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Routes.tsx":"22","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/CommentForm.tsx":"23","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Comment.tsx":"24","/mnt/d/projects/Main Projects/social-media/app/client/src/components/CommentButton.tsx":"25","/mnt/d/projects/Main Projects/social-media/app/client/src/components/ConfirmModal.tsx":"26","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/EditPostForm.tsx":"27","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/EditCommentForm.tsx":"28"},{"size":219,"mtime":1609481171999,"results":"29","hashOfConfig":"30"},{"size":576,"mtime":1609756393371,"results":"31","hashOfConfig":"30"},{"size":601,"mtime":1609770634153,"results":"32","hashOfConfig":"30"},{"size":425,"mtime":1609756587385,"results":"33","hashOfConfig":"30"},{"size":723,"mtime":1609481172096,"results":"34","hashOfConfig":"30"},{"size":577,"mtime":1609586615894,"results":"35","hashOfConfig":"30"},{"size":820,"mtime":1609756806480,"results":"36","hashOfConfig":"30"},{"size":231,"mtime":1609756817215,"results":"37","hashOfConfig":"30"},{"size":215,"mtime":1609756812055,"results":"38","hashOfConfig":"30"},{"size":3904,"mtime":1609492618160,"results":"39","hashOfConfig":"30"},{"size":2137,"mtime":1609492619643,"results":"40","hashOfConfig":"30"},{"size":547,"mtime":1609511071102,"results":"41","hashOfConfig":"30"},{"size":1026,"mtime":1609486307109,"results":"42","hashOfConfig":"30"},{"size":501,"mtime":1609492536683,"results":"43","hashOfConfig":"30"},{"size":1623,"mtime":1609581014216,"results":"44","hashOfConfig":"30"},{"size":1797,"mtime":1609583240312,"results":"45","hashOfConfig":"30"},{"size":468,"mtime":1609583256065,"results":"46","hashOfConfig":"30"},{"size":4356,"mtime":1609858415015,"results":"47","hashOfConfig":"30"},{"size":1521,"mtime":1609661472955,"results":"48","hashOfConfig":"30"},{"size":1698,"mtime":1609831077599,"results":"49","hashOfConfig":"30"},{"size":1091,"mtime":1609756859251,"results":"50","hashOfConfig":"30"},{"size":718,"mtime":1609661601127,"results":"51","hashOfConfig":"30"},{"size":1763,"mtime":1609662348472,"results":"52","hashOfConfig":"30"},{"size":3464,"mtime":1609858620981,"results":"53","hashOfConfig":"30"},{"size":637,"mtime":1609667276202,"results":"54","hashOfConfig":"30"},{"size":1201,"mtime":1609831377500,"results":"55","hashOfConfig":"30"},{"size":1714,"mtime":1609858409012,"results":"56","hashOfConfig":"30"},{"size":1656,"mtime":1609946112273,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"5ctubq",{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"60"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"60"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"60"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"60"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"60"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"60"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"60"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122"},"/mnt/d/projects/Main Projects/social-media/app/client/src/index.tsx",[],["123","124"],"/mnt/d/projects/Main Projects/social-media/app/client/src/App.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/utils/ApolloClient.ts",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Navbar.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/utils/cookies.ts",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Links.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Home.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Register.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Login.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/RegisterForm.tsx",["125"],"import React from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\n\nimport { AuthContext } from \"../../AuthUser.context\";\nimport useForm from \"../../hooks/useForm\";\nimport CustomInput from \"../CustomInput\";\n\ninterface RegisterFormValues {\n  firstName: string;\n  lastName: string;\n  username: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n}\n\nconst RegisterForm: React.FC = () => {\n  const context = React.useContext(AuthContext);\n  const [errors, setErrors] = React.useState<RegisterFormValues>({\n    firstName: \"\",\n    lastName: \"\",\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const { values, onSubmit, onChange } = useForm<RegisterFormValues>(\n    {\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n    handleRegistration\n  );\n\n  const [registerUser, { loading }] = useMutation(REGISTER_USER, {\n    update(_, { data: { register: userData } }) {\n      context.login(userData);\n    },\n    variables: values,\n    onError({ graphQLErrors, networkError }) {\n      if (graphQLErrors) {\n        setErrors(graphQLErrors[0].extensions!.exception.errors);\n      }\n    },\n  });\n\n  function handleRegistration() {\n    registerUser();\n  }\n\n  return (\n    <form className=\"form\" onSubmit={onSubmit}>\n      <div className=\"form-control\">\n        <CustomInput\n          id=\"register-firstName\"\n          label=\"First Name\"\n          name=\"firstName\"\n          type=\"text\"\n          value={values.firstName}\n          handleChange={onChange}\n          error={errors.firstName}\n          required\n        />\n        <CustomInput\n          id=\"register-lastName\"\n          label=\"Last Name\"\n          name=\"lastName\"\n          type=\"text\"\n          value={values.lastName}\n          handleChange={onChange}\n          error={errors.lastName}\n        />\n      </div>\n      <div className=\"form-control\">\n        <CustomInput\n          handleChange={onChange}\n          id=\"register-username\"\n          label=\"Username\"\n          type=\"text\"\n          name=\"username\"\n          value={values.username}\n          error={errors.username}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <CustomInput\n          handleChange={onChange}\n          id=\"register-email\"\n          label=\"Email\"\n          type=\"email\"\n          name=\"email\"\n          value={values.email}\n          error={errors.email}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <CustomInput\n          handleChange={onChange}\n          id=\"register-password\"\n          label=\"Password\"\n          type=\"password\"\n          name=\"password\"\n          value={values.password}\n          error={errors.password}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <CustomInput\n          id=\"register-confirmPassword\"\n          label=\"Confirm password\"\n          name=\"confirmPassword\"\n          type=\"password\"\n          value={values.confirmPassword}\n          handleChange={onChange}\n          error={errors.confirmPassword}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <button type=\"submit\" className=\"btn btn__basic\">\n          Register\n        </button>\n      </div>\n    </form>\n  );\n};\n\nconst REGISTER_USER = gql`\n  mutation(\n    $username: String!\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        username: $username\n        firstName: $firstName\n        lastName: $lastName\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      username\n      token\n      createdAt\n      firstName\n      lastName\n      email\n      id\n    }\n  }\n`;\n\nexport default RegisterForm;\n","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/LoginForm.tsx",["126"],"import React from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\n\nimport { AuthContext } from \"../../AuthUser.context\";\nimport useForm from \"../../hooks/useForm\";\nimport CustomInput from \"../CustomInput\";\n\ninterface LoginFormValues {\n  username: string;\n  password: string;\n}\n\nconst LoginForm: React.FC = () => {\n  const context = React.useContext(AuthContext);\n  const [errors, setErrors] = React.useState<{ general: string }>({\n    general: \"\",\n  });\n  const { values, onSubmit, onChange } = useForm<LoginFormValues>(\n    {\n      username: \"\",\n      password: \"\",\n    },\n    handleLogin\n  );\n\n  const [loginUser, { loading }] = useMutation(LOGIN_USER, {\n    update(_, { data: { login: userData } }) {\n      context.login(userData);\n    },\n    onError({ graphQLErrors, networkError }) {\n      if (graphQLErrors) {\n        setErrors(graphQLErrors[0].extensions!.exception.errors);\n      }\n    },\n    variables: values,\n  });\n\n  function handleLogin() {\n    loginUser();\n  }\n\n  return (\n    <form className=\"form\" onSubmit={onSubmit}>\n      {errors.general !== \"\" && (\n        <h4 className=\"custom-input__error\">{errors.general}</h4>\n      )}\n      <div className=\"form-control\">\n        <CustomInput\n          id=\"login-username\"\n          label=\"Username\"\n          type=\"text\"\n          name=\"username\"\n          value={values.username}\n          handleChange={onChange}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <CustomInput\n          id=\"login-password\"\n          label=\"Password\"\n          type=\"password\"\n          name=\"password\"\n          value={values.password}\n          handleChange={onChange}\n          required\n        />\n      </div>\n      <div className=\"form-control\">\n        <button type=\"submit\" className=\"btn btn__basic\">\n          Login\n        </button>\n      </div>\n    </form>\n  );\n};\n\nconst LOGIN_USER = gql`\n  mutation($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      username\n      firstName\n      lastName\n      token\n      email\n      createdAt\n    }\n  }\n`;\n\nexport default LoginForm;\n","/mnt/d/projects/Main Projects/social-media/app/client/src/hooks/useForm.ts",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/CustomInput.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/AuthRoute.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/AuthUser.context.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/PostForm.tsx",["127"],"import { gql, useMutation } from \"@apollo/client\";\r\nimport React from \"react\";\r\n\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { GET_ALL_POSTS } from \"../../utils/graphql\";\r\nimport CustomInput from \"../CustomInput\";\r\n\r\ninterface NewPostFormValues {\r\n  body: string;\r\n}\r\n\r\nconst PostForm: React.FC = () => {\r\n  let { values, onChange, onSubmit } = useForm<NewPostFormValues>(\r\n    { body: \"\" },\r\n    handleNewPostCreation\r\n  );\r\n\r\n  const [createPost, { loading }] = useMutation(CREATE_POST, {\r\n    update(proxy, { data: { createPost: post } }) {\r\n      let data: any = proxy.readQuery({ query: GET_ALL_POSTS });\r\n\r\n      proxy.writeQuery({\r\n        query: GET_ALL_POSTS,\r\n        data: { getPosts: [post, ...data.getPosts] },\r\n      });\r\n      values.body = \"\";\r\n    },\r\n    onError(err) {\r\n      console.log(err);\r\n    },\r\n    variables: values,\r\n  });\r\n\r\n  function handleNewPostCreation() {\r\n    createPost();\r\n  }\r\n\r\n  return (\r\n    <form className=\"form post-form\" onSubmit={onSubmit}>\r\n      <CustomInput\r\n        id=\"new-post\"\r\n        label=\"Create a new post\"\r\n        name=\"body\"\r\n        type=\"text\"\r\n        value={values.body}\r\n        handleChange={onChange}\r\n        required\r\n      />\r\n      <button type=\"submit\" className=\"btn\">\r\n        Post!\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst CREATE_POST = gql`\r\n  mutation($body: String!) {\r\n    createPost(body: $body) {\r\n      id\r\n      body\r\n      username\r\n      firstName\r\n      lastName\r\n      edited\r\n      createdAt\r\n      likeCount\r\n      likes {\r\n        id\r\n        username\r\n      }\r\n      commentCount\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default PostForm;\r\n","/mnt/d/projects/Main Projects/social-media/app/client/src/utils/graphql.ts",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/PostCard.tsx",["128"],"import React, { useState, useContext } from \"react\";\r\nimport { gql, useMutation } from \"@apollo/client\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { GET_ALL_POSTS } from \"../utils/graphql\";\r\nimport { Post } from \"../utils/types\";\r\nimport { AuthContext } from \"../AuthUser.context\";\r\nimport LikeButton from \"./LikeButton\";\r\nimport CommentForm from \"./Forms/CommentForm\";\r\nimport Comment from \"./Comment\";\r\nimport CommentButton from \"./CommentButton\";\r\nimport EditPostForm from \"./Forms/EditPostForm\";\r\nimport ConfirmModal from \"./ConfirmModal\";\r\n\r\ninterface Props {\r\n  post: Post;\r\n}\r\n\r\nconst PostCard: React.FC<Props> = ({\r\n  post: {\r\n    id,\r\n    edited,\r\n    firstName,\r\n    lastName,\r\n    username,\r\n    createdAt,\r\n    body,\r\n    likeCount,\r\n    commentCount,\r\n    comments,\r\n    likes,\r\n  },\r\n}) => {\r\n  const [showCommentForm, setShowCommentForm] = useState(false);\r\n  const [showEditPost, setShowEditPost] = useState(false);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [deletePost, { loading }] = useMutation(DELETE_POST, {\r\n    update(proxy, { data: { deletePost: post } }) {\r\n      let data: any = proxy.readQuery({ query: GET_ALL_POSTS });\r\n\r\n      proxy.writeQuery({\r\n        query: GET_ALL_POSTS,\r\n        data: {\r\n          getPosts: data.getPosts.filter(\r\n            (post: { id: string }) => id !== post.id\r\n          ),\r\n        },\r\n      });\r\n    },\r\n    onError(err) {\r\n      console.log(err);\r\n    },\r\n    variables: { postId: id },\r\n  });\r\n\r\n  let signedInUserPost = false;\r\n  if (user) {\r\n    signedInUserPost = user.username === username;\r\n  }\r\n\r\n  return (\r\n    <div className=\"post-card\">\r\n      <ConfirmModal\r\n        open={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        onCancel={() => setModalOpen(false)}\r\n        onConfirm={deletePost}\r\n      >\r\n        Do you want to delete this post?\r\n      </ConfirmModal>\r\n\r\n      {signedInUserPost && (\r\n        <div className=\"post-card__menu\">\r\n          <ul className=\"post-card__menu-items\">\r\n            <li\r\n              className=\"post-card__menu-item\"\r\n              onClick={() => setShowEditPost((show) => !show)}\r\n            >\r\n              Edit\r\n            </li>\r\n            <li\r\n              className=\"post-card__menu-item\"\r\n              onClick={() => setModalOpen(true)}\r\n            >\r\n              Delete\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n      <h2 className=\"title\">\r\n        {firstName} {lastName}\r\n      </h2>\r\n      <h4 className=\"subtitle link\">\r\n        <Link to={`/user/${username}`}>@{username}</Link>\r\n      </h4>\r\n      <span className=\"post-card__meta\">\r\n        {new Date(createdAt).toLocaleDateString(\"en-gb\", {\r\n          year: \"numeric\",\r\n          month: \"long\",\r\n          day: \"numeric\",\r\n        })}\r\n      </span>\r\n      {showEditPost ? (\r\n        <EditPostForm\r\n          body={body}\r\n          postId={id}\r\n          callback={() => setShowEditPost((show) => !show)}\r\n        />\r\n      ) : (\r\n        <Link to={`/post/${username}/${id}`}>\r\n          <p className=\"post-card__description\">\r\n            {edited && <em>(edited)</em>}\r\n            {body}\r\n          </p>\r\n        </Link>\r\n      )}\r\n      <div className=\"post-card__extra\">\r\n        <LikeButton\r\n          id={id}\r\n          username={username}\r\n          likes={likes}\r\n          likeCount={likeCount}\r\n          user={user}\r\n        />\r\n        <CommentButton\r\n          count={commentCount}\r\n          user={user}\r\n          callback={() => {\r\n            setShowCommentForm((show) => !show);\r\n          }}\r\n        />\r\n      </div>\r\n      {user && showCommentForm && <CommentForm postId={id} />}\r\n      {comments.map((comment) => (\r\n        <Comment key={comment.commentId} postId={id} comment={comment} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const DELETE_POST = gql`\r\n  mutation deletePost($postId: ID!) {\r\n    deletePost(postId: $postId) {\r\n      id\r\n      body\r\n      username\r\n      firstName\r\n      lastName\r\n      edited\r\n      createdAt\r\n      likeCount\r\n      likes {\r\n        id\r\n        username\r\n      }\r\n      commentCount\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default PostCard;\r\n","/mnt/d/projects/Main Projects/social-media/app/client/src/components/LikeButton.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/SingleUser.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/SinglePost.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/pages/Routes.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/CommentForm.tsx",["129"],"import React from \"react\";\r\nimport { gql, useMutation } from \"@apollo/client\";\r\n\r\nimport useForm from \"../../hooks/useForm\";\r\nimport CustomInput from \"../CustomInput\";\r\n\r\ninterface Props {\r\n  postId: string;\r\n}\r\n\r\nconst CommentForm: React.FC<Props> = ({ postId }) => {\r\n  const { values, onSubmit, onChange } = useForm<{ comment: string }>(\r\n    {\r\n      comment: \"\",\r\n    },\r\n    handleComment\r\n  );\r\n\r\n  const [createComment, { loading }] = useMutation(CREATE_COMMENT, {\r\n    update(_, { data: { createComment: post } }) {\r\n      values.comment = \"\";\r\n    },\r\n    variables: {\r\n      body: values.comment,\r\n      postId,\r\n    },\r\n  });\r\n\r\n  function handleComment() {\r\n    createComment();\r\n  }\r\n\r\n  return (\r\n    <form className=\"form form-comment\" onSubmit={onSubmit}>\r\n      <div className=\"form-control\">\r\n        <CustomInput\r\n          id=\"comment\"\r\n          label=\"Comment\"\r\n          name=\"comment\"\r\n          type=\"text\"\r\n          value={values.comment}\r\n          handleChange={onChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div className=\"form-control\">\r\n        <button type=\"submit\" className=\"btn btn__basic\">\r\n          Comment\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst CREATE_COMMENT = gql`\r\n  mutation createComment($postId: ID!, $body: String!) {\r\n    createComment(postId: $postId, body: $body) {\r\n      id\r\n      body\r\n      username\r\n      firstName\r\n      lastName\r\n      edited\r\n      createdAt\r\n      likeCount\r\n      likes {\r\n        id\r\n        username\r\n      }\r\n      commentCount\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default CommentForm;\r\n","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Comment.tsx",["130"],"import { gql, useMutation } from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../AuthUser.context\";\r\nimport { GET_ALL_POSTS } from \"../utils/graphql\";\r\nimport ConfirmModal from \"./ConfirmModal\";\r\nimport EditCommentForm from \"./Forms/EditCommentForm\";\r\n\r\ninterface Props {\r\n  comment: {\r\n    id: string;\r\n    commentId: string;\r\n    body: string;\r\n    username: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    createdAt: string;\r\n    edited: boolean;\r\n  };\r\n  postId: string;\r\n}\r\n\r\nconst Comment: React.FC<Props> = ({\r\n  comment: {\r\n    commentId,\r\n    body,\r\n    username,\r\n    firstName,\r\n    lastName,\r\n    createdAt,\r\n    edited,\r\n  },\r\n  postId,\r\n}) => {\r\n  const [showEditComment, setShowEditComment] = React.useState(false);\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const { user } = React.useContext(AuthContext);\r\n\r\n  const [deleteComment, { loading }] = useMutation(DELETE_COMMENT, {\r\n    update(proxy, { data: { deleteComment: post } }) {\r\n      let queryData: any = proxy.readQuery({ query: GET_ALL_POSTS });\r\n\r\n      proxy.writeQuery({\r\n        query: GET_ALL_POSTS,\r\n        data: queryData,\r\n      });\r\n    },\r\n    onError(err) {\r\n      console.log(err);\r\n    },\r\n    variables: {\r\n      postId,\r\n      commentId,\r\n    },\r\n  });\r\n\r\n  let signedInUserComment = false;\r\n  if (user) {\r\n    signedInUserComment = user.username === username;\r\n  }\r\n\r\n  return (\r\n    <div className=\"comment\">\r\n      <ConfirmModal\r\n        open={modalOpen}\r\n        onClose={() => setModalOpen(false)}\r\n        onCancel={() => setModalOpen(false)}\r\n        onConfirm={deleteComment}\r\n      >\r\n        Do you want to delete this comment?\r\n      </ConfirmModal>\r\n      {user && signedInUserComment && (\r\n        <div className=\"comment__menu\">\r\n          <ul className=\"comment__menu-items\">\r\n            <li\r\n              className=\"comment__menu-item\"\r\n              onClick={() => setShowEditComment((show) => !show)}\r\n            >\r\n              Edit\r\n            </li>\r\n            <li\r\n              className=\"comment__menu-item\"\r\n              onClick={() => setModalOpen(true)}\r\n            >\r\n              Delete\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      )}\r\n      <span className=\"comment__title\">\r\n        {firstName} {lastName}\r\n      </span>\r\n      <span className=\"comment__subtitle\">\r\n        <Link to={`/user/${username}`}>@{username}</Link>\r\n      </span>\r\n      <span className=\"comment__meta\">\r\n        {new Date(createdAt).toLocaleDateString(\"en-gb\", {\r\n          year: \"numeric\",\r\n          month: \"long\",\r\n          day: \"numeric\",\r\n        })}\r\n      </span>\r\n      {showEditComment ? (\r\n        <EditCommentForm\r\n          body={body}\r\n          postId={postId}\r\n          commentId={commentId}\r\n          callback={() => setShowEditComment((show) => !show)}\r\n        />\r\n      ) : (\r\n        <p className=\"comment__description\">\r\n          {edited && <em>(edited)</em>}\r\n          {body}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DELETE_COMMENT = gql`\r\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\r\n    deleteComment(postId: $postId, commentId: $commentId) {\r\n      id\r\n      commentCount\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default Comment;\r\n","/mnt/d/projects/Main Projects/social-media/app/client/src/components/CommentButton.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/ConfirmModal.tsx",[],"/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/EditPostForm.tsx",["131","132"],"import { gql, useMutation } from \"@apollo/client\";\r\nimport React from \"react\";\r\n\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { GET_ALL_POSTS } from \"../../utils/graphql\";\r\nimport CustomInput from \"../CustomInput\";\r\n\r\ninterface Props {\r\n  body: string;\r\n  postId: string;\r\n  callback?: () => void;\r\n}\r\n\r\ninterface EditFormValues {\r\n  body: string;\r\n}\r\n\r\nconst EditPostForm: React.FC<Props> = ({ body, postId, callback }) => {\r\n  let { values, onChange, onSubmit } = useForm<EditFormValues>(\r\n    { body },\r\n    handleEdit\r\n  );\r\n\r\n  const [editPost, { loading }] = useMutation(EDIT_POST, {\r\n    update(_, { data: { editPost: post } }) {},\r\n    variables: {\r\n      postId,\r\n      body: values.body,\r\n    },\r\n  });\r\n\r\n  function handleEdit() {\r\n    editPost();\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"form post-form\" onSubmit={onSubmit}>\r\n      <CustomInput\r\n        id=\"edit-post\"\r\n        label=\"Edit post\"\r\n        name=\"body\"\r\n        type=\"text\"\r\n        value={values.body}\r\n        handleChange={onChange}\r\n        required\r\n      />\r\n      <button type=\"submit\" className=\"btn\">\r\n        Edit\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst EDIT_POST = gql`\r\n  mutation($postId: ID!, $body: String!) {\r\n    editPost(postId: $postId, body: $body) {\r\n      id\r\n      body\r\n      username\r\n      firstName\r\n      lastName\r\n      edited\r\n      createdAt\r\n      likeCount\r\n      likes {\r\n        id\r\n        username\r\n      }\r\n      commentCount\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default EditPostForm;\r\n","/mnt/d/projects/Main Projects/social-media/app/client/src/components/Forms/EditCommentForm.tsx",["133","134"],"import { gql, useMutation } from \"@apollo/client\";\r\nimport React from \"react\";\r\n\r\nimport useForm from \"../../hooks/useForm\";\r\nimport { GET_ALL_POSTS } from \"../../utils/graphql\";\r\nimport CustomInput from \"../CustomInput\";\r\n\r\ninterface Props {\r\n  body: string;\r\n  postId: string;\r\n  commentId: string;\r\n  callback?: () => void;\r\n}\r\n\r\ninterface EditFormValues {\r\n  body: string;\r\n}\r\n\r\nconst EditCommentForm: React.FC<Props> = ({\r\n  body,\r\n  postId,\r\n  commentId,\r\n  callback,\r\n}) => {\r\n  let { values, onChange, onSubmit } = useForm<EditFormValues>(\r\n    { body },\r\n    handleEdit\r\n  );\r\n\r\n  const [editComment, { loading }] = useMutation(EDIT_COMMENT, {\r\n    update(_, { data: { editComment: post } }) {},\r\n    variables: {\r\n      postId,\r\n      commentId,\r\n      body: values.body,\r\n    },\r\n  });\r\n\r\n  function handleEdit() {\r\n    editComment();\r\n    if (callback) {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"form post-form\" onSubmit={onSubmit}>\r\n      <CustomInput\r\n        id=\"edit-comment\"\r\n        label=\"Edit comment\"\r\n        name=\"body\"\r\n        type=\"text\"\r\n        value={values.body}\r\n        handleChange={onChange}\r\n        required\r\n      />\r\n      <button type=\"submit\" className=\"btn\">\r\n        Edit\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst EDIT_COMMENT = gql`\r\n  mutation($postId: ID!, $commentId: ID!, $body: String!) {\r\n    editComment(postId: $postId, commentId: $commentId, body: $body) {\r\n      comments {\r\n        id\r\n        commentId\r\n        body\r\n        username\r\n        firstName\r\n        lastName\r\n        createdAt\r\n        edited\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default EditCommentForm;\r\n",{"ruleId":"135","replacedBy":"136"},{"ruleId":"137","replacedBy":"138"},{"ruleId":"139","severity":1,"message":"140","line":39,"column":26,"nodeType":"141","messageId":"142","endLine":39,"endColumn":33},{"ruleId":"139","severity":1,"message":"140","line":26,"column":23,"nodeType":"141","messageId":"142","endLine":26,"endColumn":30},{"ruleId":"139","severity":1,"message":"140","line":18,"column":24,"nodeType":"141","messageId":"142","endLine":18,"endColumn":31},{"ruleId":"139","severity":1,"message":"140","line":39,"column":24,"nodeType":"141","messageId":"142","endLine":39,"endColumn":31},{"ruleId":"139","severity":1,"message":"140","line":19,"column":27,"nodeType":"141","messageId":"142","endLine":19,"endColumn":34},{"ruleId":"139","severity":1,"message":"140","line":40,"column":27,"nodeType":"141","messageId":"142","endLine":40,"endColumn":34},{"ruleId":"139","severity":1,"message":"143","line":5,"column":10,"nodeType":"141","messageId":"142","endLine":5,"endColumn":23},{"ruleId":"139","severity":1,"message":"140","line":24,"column":22,"nodeType":"141","messageId":"142","endLine":24,"endColumn":29},{"ruleId":"139","severity":1,"message":"143","line":5,"column":10,"nodeType":"141","messageId":"142","endLine":5,"endColumn":23},{"ruleId":"139","severity":1,"message":"140","line":30,"column":25,"nodeType":"141","messageId":"142","endLine":30,"endColumn":32},"no-native-reassign",["144"],"no-negated-in-lhs",["145"],"@typescript-eslint/no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar","'GET_ALL_POSTS' is defined but never used.","no-global-assign","no-unsafe-negation"]